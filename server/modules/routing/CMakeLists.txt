if(BUILD_TESTS)
  add_subdirectory(test)
  add_library(testroute SHARED testroute.c)
  target_link_libraries(testroute maxscale-common)
  set_target_properties(testroute PROPERTIES VERSION "1.0.0")
  install(TARGETS testroute DESTINATION ${MAXSCALE_LIBDIR})
endif()

add_library(readconnroute SHARED readconnroute.c)
target_link_libraries(readconnroute maxscale-common)
set_target_properties(readconnroute PROPERTIES VERSION "1.1.0")
install(TARGETS readconnroute DESTINATION ${MAXSCALE_LIBDIR})

add_library(debugcli SHARED debugcli.c debugcmd.c)
target_link_libraries(debugcli maxscale-common)
set_target_properties(debugcli PROPERTIES VERSION "1.1.1")
install(TARGETS debugcli DESTINATION ${MAXSCALE_LIBDIR})

add_library(cli SHARED cli.c debugcmd.c)
target_link_libraries(cli maxscale-common)
set_target_properties(cli PROPERTIES VERSION "1.0.0")
install(TARGETS cli DESTINATION ${MAXSCALE_LIBDIR})

add_library(flexmaster SHARED flexmaster.c)
target_link_libraries(flexmaster maxscale-common HTTPD)
install(TARGETS flexmaster DESTINATION ${MAXSCALE_LIBDIR})

add_library(shards SHARED shards.c)
target_link_libraries(shards accountmon maxscale-common)
install(TARGETS shards DESTINATION ${MAXSCALE_LIBDIR})

add_subdirectory(readwritesplit)
add_subdirectory(schemarouter)
if(BUILD_BINLOG)
  add_subdirectory(binlog)
endif()
add_subdirectory(maxinfo)

